{"version":3,"sources":["../../src/pages/edit-profile/edit-profile.module.ts","../../src/pages/edit-profile/edit-profile.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EditProfilePage } from './edit-profile';\n\n@NgModule({\n  declarations: [\n    EditProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EditProfilePage),\n  ],\n})\nexport class EditProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-profile/edit-profile.module.ts","import { Component } from '@angular/core';\nimport {\n  Alert,\n  AlertController,\n  IonicPage,\n  NavController,\n  Loading,\n  LoadingController,\n  NavParams,\n  ModalController\n  } from \"ionic-angular\";\n  import { ProfileProvider } from \"../../providers/profile/profile\";\n  import { AuthProvider } from \"../../providers/auth/auth\";\n  import { Camera } from '@ionic-native/camera';\n  import { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\n  import { EmailValidator } from \"../../validators/email\";\n/**\n * Generated class for the EditProfilePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-edit-profile',\n  templateUrl: 'edit-profile.html',\n})\nexport class EditProfilePage {\n  public userProfile: any;\n  public editProfileForm: FormGroup;\n  public loading: Loading;\n  public loadedPhoto: any;\n  public photo: string = null;\n\n  constructor(\n    public navCtrl: NavController,\n    public alertCtrl: AlertController,\n    public authProvider: AuthProvider,\n    public profileProvider: ProfileProvider,\n    public navParam: NavParams,\n    public cameraPlugin: Camera,\n    public modalCtrl: ModalController,\n    public loadingCtrl: LoadingController,\n    formBuilder: FormBuilder\n  ) {\n    this.editProfileForm = formBuilder.group({\n      firstName: [\n        \"\",\n        Validators.compose([Validators.required, Validators.minLength(2)])\n       ],\n      lastName:[\n        \"\",\n        Validators.compose([Validators.required, Validators.minLength(2)])\n      ],\n      aboutMe:[\"\"]\n    });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad EditProfilePage');\n    this.profileProvider.getUserProfile().on(\"value\", userProfileSnapshot => {\n      this.userProfile = userProfileSnapshot.val();\n      this.editProfileForm.controls['firstName'].setValue(userProfileSnapshot.val().firstName);\n      this.editProfileForm.controls['lastName'].setValue(userProfileSnapshot.val().lastName);\n      this.editProfileForm.controls['aboutMe'].setValue(userProfileSnapshot.val().aboutMe);\n      this.loadedPhoto = userProfileSnapshot.val().photo;\n    })\n  }\n\n  logOut() : void {\n    this.authProvider.logoutUser().then(() => {\n      this.navCtrl.setRoot(\"LoginPage\");\n    });\n  }\n\n  updateProfile(): void {\n    console.log(\"update profile\");\n    if (!this.editProfileForm.valid) {\n      console.log(\n       `Need to complete the form, current value: ${this.editProfileForm.value}`\n      );\n    } else {\n      console.log(\"validated\");\n      const aboutMe: string = this.editProfileForm.value.aboutMe;\n      const firstName: string = this.editProfileForm.value.firstName;\n      const lastName: string = this.editProfileForm.value.lastName;\n      if(this.userProfile.photo != this.loadedPhoto){\n        this.photo = this.userProfile.photo;\n      }\n      this.profileProvider.updateProfile(firstName, lastName, aboutMe, this.photo).then(\n        profile => {\n          this.loading.dismiss();\n          this.navCtrl.pop();\n      },\n      error => {\n        this.loading.dismiss().then(() => {\n          const alert: Alert = this.alertCtrl.create({\n            message: error.message,\n            buttons: [{ text: \"Ok\", role: \"cancel\" }]\n          });\n          alert.present();\n        });\n      }\n    );\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n    }\n  }\n\n  updatePhoto(): void{\n    this.profileProvider.updatePhoto(this.userProfile.photo).then(\n      profile => {\n        console.log(\"done\");\n        // this.loading.dismiss();\n\n    },\n    error => {\n      console.log(error.message);\n    }\n  );\n  }\n  // updateName() : void {\n  //   const alert: Alert = this.alertCtrl.create({\n  //     message: \"Your first name & last name\",\n  //     inputs: [\n  //       {\n  //         name: \"firstName\",\n  //         placeholder: \"Your first name\",\n  //         value: this.userProfile.firstName\n  //       },\n  //       {\n  //         name: \"lastName\",\n  //         placeholder: \"Your last name\",\n  //         value: this.userProfile.lastName\n  //       }\n  //     ],\n  //     buttons: [\n  //       {text: \"Cancel\" },\n  //       {\n  //         text: \"Save\",\n  //         handler: data => {\n  //           this.profileProvider.updateName(data.firstName, data.lastName);\n  //         }\n  //       }\n  //     ]\n  //   });\n  //   alert.present();\n  // }\n\n  // updateEmail(): void {\n  //   let alert: Alert = this.alertCtrl.create({\n  //     inputs: [{ name: 'newEmail', placeholder: 'Your new email' },\n  //    { name: 'password', placeholder: 'Your password', type: 'password' }],\n  //    buttons: [\n  //      { text: 'Cancel' },\n  //      { text: 'Save',\n  //        handler: data => {\n  //         this.profileProvider\n  //           .updateEmail(data.newEmail, data.password)\n  //            .then(() => { console.log('Email Changed Successfully'); })\n  //            .catch(error => { console.log('ERROR: ' + error.message); });\n  //     }}]\n  //   });\n  //   alert.present();\n  // }\n\n  // updatePassword(): void {\n  //   let alert: Alert = this.alertCtrl.create({\n  //     inputs: [\n  //       { name: 'newPassword', placeholder: 'New password', type: 'password' },\n  //       { name: 'oldPassword', placeholder: 'Old password', type: 'password' }],\n  //     buttons: [\n  //       { text: 'Cancel' },\n  //       { text: 'Save',\n  //         handler: data => {\n  //         this.profileProvider.updatePassword(\n  //           data.newPassword,\n  //           data.oldPassword\n  //          );\n  //         }\n  //       }\n  //     ]\n  //   });\n  //   alert.present();\n  // }\n\n  // updatePhoto(): void{\n  //   let modal = this.modalCtrl.create('EditPhotoPage');\n  //   // let me = this;\n  //   modal.onDidDismiss(data => {\n  //     this.userProfile.photo = data.imgurl;\n  //   });\n  //   modal.present();\n  // }\n\n  openGallery(): void {\n    this.cameraPlugin \n      .getPicture({\n        quality: 95,\n        destinationType: this.cameraPlugin.DestinationType.DATA_URL,\n        sourceType: this.cameraPlugin.PictureSourceType.PHOTOLIBRARY,\n        allowEdit: true,\n        encodingType: this.cameraPlugin.EncodingType.PNG,\n        targetWidth: 500,\n        targetHeight: 500\n      })\n      .then(\n        imageData => {\n          this.userProfile.photo = 'data:image/png;base64,' + imageData;\n        },\n        error => {\n          console.log(\"ERROR -> \" + JSON.stringify(error));\n        }\n      );\n  }\n\n  openCamera(){\n    console.log(\"open camera\");\n    this.cameraPlugin \n      .getPicture({\n        quality: 95,\n        destinationType: this.cameraPlugin.DestinationType.DATA_URL,\n        sourceType: this.cameraPlugin.PictureSourceType.CAMERA,\n        allowEdit: true,\n        encodingType: this.cameraPlugin.EncodingType.PNG,\n        targetWidth: 500,\n        targetHeight: 500,\n        saveToPhotoAlbum: true\n      })\n      .then(\n        imageData => {\n          this.userProfile.photo = 'data:image/png;base64,' + imageData;\n        },\n        error => {\n          console.log(\"ERROR -> \" + JSON.stringify(error));\n        }\n      );\n  }\n\n  openReview(){\n    this.navCtrl.push('ReviewListPage');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-profile/edit-profile.ts"],"sourceRoot":""}