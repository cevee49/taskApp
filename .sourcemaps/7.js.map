{"version":3,"sources":["../../src/pages/task-list/task-list.module.ts","../../src/pages/task-list/task-list.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TaskListPage } from './task-list';\n\n@NgModule({\n  declarations: [\n    TaskListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(TaskListPage),\n  ],\n})\nexport class TaskListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/task-list/task-list.module.ts","import { Component } from '@angular/core';\nimport { \n  IonicPage, \n  NavController, \n  NavParams, \n  ModalController, \n  Loading,\n  LoadingController, \n  Events\n} from 'ionic-angular';\nimport { TaskProvider } from \"../../providers/task/task\";\nimport { ProfileProvider } from \"../../providers/profile/profile\";\nimport { LocationProvider } from \"../../providers/location/location\";\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\n/**\n * Generated class for the TaskListPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-task-list',\n  templateUrl: 'task-list.html',\n})\nexport class TaskListPage {\n  public taskList: Array<any>;\n  public loadedTaskList: Array<any>;\n  searching: any = false;\n  public filterForm: FormGroup;\n  public posterimg: any;\n  public loading: Loading;\n  badge: number = 1;\n\n  constructor(\n    public navCtrl: NavController, \n    public taskProvider: TaskProvider,\n    public profileProvider: ProfileProvider,\n    public locationProvider: LocationProvider,\n    public modalCtrl: ModalController,\n    public loadingCtrl: LoadingController,\n    public events: Events,\n    formBuilder: FormBuilder\n  ) {\n    \n  }\n\n  initializeItems():void {\n    this.taskList = this.loadedTaskList;\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad TaskListPage');\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n    this.taskProvider.getTaskList().on(\"value\", taskListSnapshot => {\n      let tasks = [];\n      taskListSnapshot.forEach(snap => {\n        this.profileProvider.getOtherProfile(snap.val().poster).on(\"value\", userProfileSnapshot => {\n          this.posterimg = userProfileSnapshot.val().photo;\n          tasks.push({\n            id: snap.key,\n            name: snap.val().name,\n            date: snap.val().date,\n            category: snap.val().category,\n            location: snap.val().location.place,\n            lat :snap.val().location.latitude,\n            lng :snap.val().location.longitude,\n            description: snap.val().description,\n            budget: parseInt(snap.val().budget), \n            taskerNumber: snap.val().taskerNumber,\n            assignNumber: snap.val().assignNumber,\n            completedNumber: snap.val().completedNumber,\n            status:snap.val().status,\n            posterimg :userProfileSnapshot.val().photo\n          });\n        })\n        \n        return false;\n      });\n      this.taskList = tasks;\n      this.loadedTaskList = tasks;   \n      this.loading.dismiss();\n    })\n  }\n\n  goToTaskDetail(taskId):void{\n    this.navCtrl.push('TaskDetailPage', {taskId: taskId});\n  }\n\n  getItems(searchbar) {\n    this.initializeItems();\n    var q = searchbar.target.value;\n\n    if(!q) {\n      return;\n    }\n\n    this.taskList = this.taskList.filter((v) => {\n      if(v.name && q) {\n        if(v.name.toLowerCase().indexOf(q.toLowerCase()) > -1) {\n          return true;\n        }\n        return false;\n      }\n    });\n\n    console.log(q, this.taskList.length);\n  }\n\n  openFilter(){\n    let modal = this.modalCtrl.create('TaskFilterPage');\n    modal.onDidDismiss(data => {\n      this.loading = this.loadingCtrl.create();\n      this.loading.present();\n      const taskCat = data.taskCat;\n      const lat = data.lat;\n      const lng = data.lng;\n      const type = data.type;\n      const hide = data.hide;\n      const min = data.min;\n      const max = data.max;\n      const distance = data.distance;\n      this.taskList = this.loadedTaskList.filter((v) => {       \n        if(v.category && taskCat != \"All categories\" ) {\n          if(v.category !=taskCat  ) {\n            return false;\n          }\n        }\n        if(v.location && type != `All` ){\n          if((type===`Online` && v.location!=`Online`) ||(type===`In person` && v.location ===`Online`) ){\n            return false;\n          }\n        }\n        if(v.lat &&v.lng && distance != `50+` && lat && lng) {\n            if(this.locationProvider.applyHaversine(v.lat,v.lng, lat, lng)>distance) {\n                return false;\n          }  \n        }\n        if(v.budget!= null && min!=null && max!=null){\n          if(v.budget<min || v.budget>max){\n            return false;\n          }\n        }\n        if(v.taskerNumber !=null && hide){\n          if(v.taskerNumber==0){\n            return false;\n          }\n        }\n        return true;\n      });\n      this.loading.dismiss();\n    });\n    modal.present();\n  }\n\n  postTask(){\n    this.navCtrl.push('TaskCreatePage');\n  }\n\n  // openChatlist(){\n  //   this.navCtrl.push('ChatListPage');\n  // }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/task-list/task-list.ts"],"sourceRoot":""}