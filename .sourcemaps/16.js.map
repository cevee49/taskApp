{"version":3,"sources":["../../src/pages/my-task/my-task.module.ts","../../src/pages/my-task/my-task.ts"],"names":[],"mappings":"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","file":"16.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MyTaskPage } from './my-task';\n\n@NgModule({\n  declarations: [\n    MyTaskPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MyTaskPage),\n  ],\n})\nexport class MyTaskPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-task/my-task.module.ts","import { Component } from '@angular/core';\nimport { \n  IonicPage, \n  NavController, \n  NavParams,\n  Loading,\n  LoadingController\n } from 'ionic-angular';\nimport { TaskProvider } from \"../../providers/task/task\";\nimport { ProfileProvider } from \"../../providers/profile/profile\";\nimport firebase from 'firebase';\n/**\n * Generated class for the MyTaskPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-my-task',\n  templateUrl: 'my-task.html',\n})\nexport class MyTaskPage {\n  public postedTaskList: Array<any>;\n  public offeredTaskList: Array<any>;\n  public loadedPosted: Array<any>;\n  public loadedOffered: Array<any>;\n  public tasks;\n  public userProfile: any;\n  public userId=  firebase.auth().currentUser ;\n  public loading: Loading = null;\n  public postedtype;\n  public offeredtype;\n  public loadP: boolean = false;\n  public loadO: boolean =false;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public taskProvider: TaskProvider,\n    public profileProvider: ProfileProvider,\n    public loadingCtrl: LoadingController\n  ) {\n    \n    console.log('ionViewDidLoad MyTaskPage');\n  }\n\n  ionViewDidEnter() {\n    this.loadP = false;\n    this.loadO = false;\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n    setTimeout(() => {\n      if(this.loading != null){\n        this.loading.dismiss();\n        this.loading =null;\n      }\n    }, 10000);\n\n    this.tasks = `posted`;\n    this.postedtype=`All tasks`;\n    this.offeredtype=`All tasks`;\n    this.postedTaskList = [];\n    this.offeredTaskList = [];\n\n    console.log('ionViewDidLoad MyTaskPage');\n    this.profileProvider.getUserProfile().on(\"value\", userProfileSnapshot => {\n        this.userProfile= userProfileSnapshot.val();\n        this.userProfile.photo = userProfileSnapshot.val().photo;\n    });\n\n    this.taskProvider\n    .getPostedTaskList()\n    .on(\"value\", postedSnapshot => {\n      this.postedTaskList = [];\n      postedSnapshot.forEach(taskSnap => {\n        this.taskProvider.getTaskDetail(taskSnap.key).on(\"value\", snap => {\n          this.postedTaskList.push({\n            id: snap.key,\n            name: snap.val().name,\n            date: snap.val().date,\n            category: snap.val().category,\n            description: snap.val().description,\n            budget: snap.val().budget, \n            tasker: snap.val().tasker,\n            photo: this.userProfile.photo,\n            taskerNumber: snap.val().taskerNumber,\n            assignNumber: snap.val().assignNumber,\n            completedNumber: snap.val().completedNumber,\n            location: snap.val().location.place\n          }); \n          console.log(snap.val().taskerNumber);\n        });\n\n      return false;\n      \n      });\n      this.loadedPosted = this.postedTaskList;\n      this.loadP = true;\n      console.log(\"posted\", this.loadP);\n      if(this.loading != null && this.loadP && this.loadO ){\n        this.loading.dismiss();\n        this.loading =null;\n      }\n   });\n   \n   this.taskProvider\n   .getOfferedTaskList()\n   .on(\"value\", offeredSnapshot => {\n     this.offeredTaskList = [];\n     offeredSnapshot.forEach(taskSnap => {\n      this.taskProvider.getTaskDetail(taskSnap.key).on(\"value\", snap => {\n        if (snap.hasChildren()) {\n          this.profileProvider.getOtherProfile(snap.val().poster).on(\"value\", userProfileSnapshot => {\n            this.offeredTaskList.push({\n             id: snap.key,\n             name: snap.val().name,\n             date: snap.val().date,\n             category: snap.val().category,\n             description: snap.val().description,\n             budget: snap.val().budget, \n             tasker: snap.val().tasker,\n             photo :userProfileSnapshot.val().photo,\n             taskerNumber: snap.val().taskerNumber,\n             assignNumber: snap.val().assignNumber,\n             completedNumber: snap.val().completedNumber,\n             location: snap.val().location.place\n           }); \n          }); \n        }\n      });\n     return false;\n     });\n     this.loadedOffered = this.offeredTaskList;\n     this.loadO = true;\n     console.log(\"offer\", this.loadO);\n     if(this.loading != null && this.loadO && this.loadP ){\n      this.loading.dismiss();\n      this.loading =null;\n    }\n  });\n\n  }\n  goToTaskDetail(taskId):void{\n    this.navCtrl.push('TaskDetailPage', {taskId: taskId});\n  }\n\n  onChange(){\n    console.log(this.offeredtype);\n    this.offeredTaskList = this.loadedOffered.filter((v) => {  \n      if(v.taskerNumber!=v.completedNumber && this.offeredtype === `Completed tasks`) {\n        return false;\n      }\n      if((v.taskerNumber!=v.completedNumber || v.taskerNumber> v.assignNumber) && this.offeredtype === `On-going tasks`) {\n        return false;\n      }\n      if(v.taskerNumber==v.assignNumber && this.offeredtype === `Open tasks`) {\n        return false;\n      }\n      return true;\n    });\n  }\n\n  doRefresh(refresher) {\n    console.log('Begin async operation', refresher);\n    this.ionViewDidEnter();\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      refresher.complete();\n    }, 2000);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-task/my-task.ts"],"sourceRoot":""}