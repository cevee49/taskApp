{"version":3,"sources":["../../src/pages/chat-list/chat-list.module.ts","../../src/pages/chat-list/chat-list.ts"],"names":[],"mappings":"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","file":"28.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChatListPage } from './chat-list';\n\n@NgModule({\n  declarations: [\n    ChatListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChatListPage),\n  ],\n})\nexport class ChatListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat-list/chat-list.module.ts","import { Component } from '@angular/core';\nimport { \n  IonicPage, \n  NavController, \n  NavParams,\n  Loading,\n  LoadingController\n } from 'ionic-angular';\nimport { ChatProvider } from \"../../providers/chat/chat\";\nimport { ProfileProvider } from \"../../providers/profile/profile\";\n/**\n * Generated class for the ChatListPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-chat-list',\n  templateUrl: 'chat-list.html',\n})\nexport class ChatListPage {\n  public chatlist : Array<any>;\n  public loading: Loading;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public chatProvider: ChatProvider,\n    public profileProvider: ProfileProvider,\n    public loadingCtrl: LoadingController\n  ) {}\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ChatListPage');\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n    this.chatProvider.getChatList()\n    .orderByChild('timestamp')\n    .on(\"value\", chatListSnapshot => {\n      this.chatlist = [];\n      chatListSnapshot.forEach(snap => {\n        console.log(snap.val().buddyId);\n        this.profileProvider.getOtherProfile(snap.val().buddyId).on(\"value\", userProfileSnapshot => {\n          console.log(userProfileSnapshot.val().photo);\n        this.chatlist.push({\n          id: snap.key,\n          lastmsg: snap.val().lastmsg,\n          timestamp: 0-snap.val().timestamp,\n          taskId: snap.val().taskId,\n          buddyId: snap.val().buddyId,\n          photo: userProfileSnapshot.val().photo,\n          buddyName: userProfileSnapshot.val().firstName,\n          read: snap.val().read\n        });\n        console.log(snap.val().read);\n      });\n        return false;\n      });\n      this.loading.dismiss();\n    });\n  }\n\n  goToChatroom (taskId, buddyId): void{\n    this.navCtrl.push('ChatroomPage', {buddyId: buddyId, taskId: taskId});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat-list/chat-list.ts"],"sourceRoot":""}